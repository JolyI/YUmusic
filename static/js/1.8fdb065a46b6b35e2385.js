webpackJsonp([1],{"+/Gm":function(e,t){},"0aAL":function(e,t,s){"use strict";var r=s("Zrlr"),a=s.n(r);t.a=function e(t){var s=t.id,r=t.name;a()(this,e),this.id=s,this.name=r,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000"+s+".jpg?max_age=2592000"}},"8RkY":function(e,t){},YOyO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={props:{placeholder:{type:String,default:"搜索歌曲，歌手"}},data:function(){return{query:""}},methods:{clear:function(){this.query=""},setQuery:function(e){this.query=e}},created:function(){var e=this;this.$watch("query",function(t){e.$emit("query",t)})}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-box"},[s("i",{staticClass:"icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"query",staticClass:"box",attrs:{placeholder:e.placeholder},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"icon-dismiss",on:{click:e.clear}})])},staticRenderFns:[]};var n=s("VU/8")(r,a,!1,function(e){s("8RkY")},"data-v-7cf64d18",null).exports,i=s("woOf"),o=s.n(i),c=s("Gak4"),u=s("T452");function l(e,t,s,r){var a=o()({},u.b,{w:e,p:t,perpage:r,n:r,catZhida:s?1:0,zhidaqu:1,t:0,flag:1,ie:"utf-8",sem:1,aggr:0,remoteplace:"txt.mqq.all",uin:0,needNewCode:1,platform:"h5"});return Object(c.a)("https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",a,u.c)}var h=s("Dd8w"),d=s.n(h),f=s("qwAB"),g=s("y/jF"),p={props:{title:{type:String,default:""}}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"no-result"},[t("div",{staticClass:"no-result-icon"}),this._v(" "),t("p",{staticClass:"no-result-text"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var m=s("VU/8")(p,v,!1,function(e){s("fMUd")},"data-v-fde2ff30",null).exports,y=s("PvFA"),_=s("NYxO"),q=s("0aAL"),w={props:{showSinger:{type:Boolean,default:!0},query:{type:String,default:""}},data:function(){return{page:1,pullup:!0,beforeScroll:!0,hasMore:!0,result:[]}},methods:d()({refresh:function(){this.$refs.suggest.refresh()},search:function(){var e=this;this.page=1,this.hasMore=!0,this.$refs.suggest.scrollTo(0,0),l(this.query,this.page,this.showSinger,20).then(function(t){t.code===u.a&&(e.result=e._genResult(t.data),e._checkMore(t.data))})},searchMore:function(){var e=this;this.hasMore&&(this.page++,l(this.query,this.page,this.showSinger,20).then(function(t){t.code===u.a&&(e.result=e.result.concat(e._genResult(t.data)),e._checkMore(t.data))}))},selectItem:function(e){if("singer"===e.type){var t=new q.a({id:e.singermid,name:e.singername});this.$router.push({path:"/search/"+t.id}),this.setSinger(t)}},getDisplayName:function(e){return"singer"===e.type?e.singername:e.name+"-"+e.singer},getIconCls:function(e){return"singer"===e.type?"icon-mine":"icon-music"},_genResult:function(e){var t=[];return e.zhida&&e.zhida.singerid&&t.push(d()({},e.zhida,{type:"singer"})),e.song&&(t=t.concat(this._normalizeSongs(e.song.list))),t},_normalizeSongs:function(e){var t=[];return e.forEach(function(e){e.songid&&e.albummid&&t.push(Object(y.a)(e))}),t},_checkMore:function(e){var t=e.song;(!t.list.length||t.curnum+20*t.curpage>t.totalnum)&&(this.hasMore=!1)}},Object(_.d)({setSinger:"SET_SINGER"})),watch:{query:function(e){console.log(e),this.search(e)}},components:{Scroll:f.a,Loading:g.a,NoResult:m}},C={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("scroll",{ref:"suggest",staticClass:"suggest",attrs:{data:e.result,pullup:e.pullup,beforeScroll:e.beforeScroll},on:{scrollToEnd:e.searchMore}},[s("ul",{staticClass:"suggest-list"},[e._l(e.result,function(t){return s("li",{staticClass:"suggest-item",on:{click:function(s){e.selectItem(t)}}},[s("div",{staticClass:"icon"},[s("i",{class:e.getIconCls(t)})]),e._v(" "),s("div",{staticClass:"name"},[s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.getDisplayName(t))}})])])}),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}],attrs:{title:""}})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasMore&&!e.result.length,expression:"!hasMore && !result.length"}],staticClass:"no-result-wrapper"},[s("no-result",{attrs:{title:"抱歉，暂无搜索结果"}})],1)])},staticRenderFns:[]};var x={created:function(){this._getHotKey()},data:function(){return{hotKey:[],query:""}},methods:{addQuery:function(e){this.$refs.searchBox.setQuery(e)},_getHotKey:function(){var e,t=this;(e=o()({},u.b,{uin:0,needNewCode:1,platform:"h5"}),Object(c.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",e,u.c)).then(function(e){e.code===u.a&&(t.hotKey=e.data.hotkey.slice(0,15))})},onQueryChange:function(e){this.query=e}},components:{SearchBox:n,Suggest:s("VU/8")(w,C,!1,function(e){s("u38J")},"data-v-9ca79d52",null).exports}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box-wrapper"},[s("SearchBox",{ref:"searchBox",on:{query:e.onQueryChange}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],staticClass:"shortcut-wrapper"},[s("div",{staticClass:"shortcut"},[s("div",{staticClass:"hot-key"},[s("h1",{staticClass:"title"},[e._v("热门搜索")]),e._v(" "),s("ul",e._l(e.hotKey,function(t){return s("li",{staticClass:"item",on:{click:function(s){e.addQuery(t.k)}}},[s("span",[e._v(e._s(t.k))])])}))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"search-result"},[s("suggest",{attrs:{query:e.query}})],1)])},staticRenderFns:[]};var M=s("VU/8")(x,S,!1,function(e){s("+/Gm")},"data-v-1cc607df",null);t.default=M.exports},fMUd:function(e,t){},u38J:function(e,t){}});
//# sourceMappingURL=1.8fdb065a46b6b35e2385.js.map